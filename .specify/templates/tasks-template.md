---
description: "功能實作的任務列表模板"
---

# 任務：[功能名稱]

**輸入**: 設計文件來自 `/specs/[###-feature-name]/`
**先決條件**: plan.md (必要), spec.md (使用者故事為必要), research.md, data-model.md, contracts/

**測試**: 以下範例包含測試任務。測試是**可選的** - 僅在功能規格書中明確要求時才包含。

**組織**: 任務按使用者故事分組，以實現每個故事的獨立實作與測試。

## 格式: `[ID] [P?] [故事] 描述`

- **[P]**: 可並行執行 (不同檔案，無依賴關係)
- **[故事]**: 此任務所屬的使用者故事 (例如：US1, US2, US3)
- 在描述中包含確切的檔案路徑

## 路徑慣例

- **單一專案**: `src/`, `tests/` 在儲存庫根目錄
- **Web 應用**: `backend/src/`, `frontend/src/`
- **行動應用**: `api/src/`, `ios/src/` 或 `android/src/`
- 以下顯示的路徑假設為單一專案 - 請根據 plan.md 的結構進行調整

<!-- 
  ============================================================================
  重要：以下的任務僅為「範例任務」，僅供說明之用。
  
  /speckit.tasks 命令「必須」根據以下文件將這些範例替換為實際任務：
  - spec.md 中的使用者故事 (及其優先級 P1, P2, P3...)
  - plan.md 中的功能需求
  - data-model.md 中的實體
  - contracts/ 中的端點
  
  任務「必須」按使用者故事組織，以便每個故事可以：
  - 獨立實作
  - 獨立測試
  - 作為 MVP 增量交付
  
  請勿在生成的 tasks.md 檔案中保留這些範例任務。
  ============================================================================
-->

## 階段 1：設定 (共享基礎設施)

**目的**: 專案初始化與基本結構

- [ ] T001 根據實作計畫建立專案結構
- [ ] T002 使用 [框架] 依賴項初始化 [語言] 專案
- [ ] T003 [P] 設定程式碼風格檢查與格式化工具

---

## 階段 2：基礎建設 (阻塞性先決條件)

**目的**: 在「任何」使用者故事實作前「必須」完成的核心基礎設施

**⚠️ 關鍵**: 在此階段完成前，不得開始任何使用者故事的工作

基礎任務範例 (請根據您的專案進行調整):

- [ ] T004 設定資料庫綱要與遷移框架
- [ ] T005 [P] 實作身份驗證/授權框架
- [ ] T006 [P] 設定 API 路由與中介軟體結構
- [ ] T007 建立所有故事都依賴的基礎模型/實體
- [ ] T008 設定錯誤處理與日誌記錄基礎設施
- [ ] T009 設定環境組態管理

**檢查點**: 基礎建設完成 - 現在可以並行開始使用者故事的實作

---

## 階段 3：使用者故事 1 - [標題] (優先級: P1) 🎯 MVP

**目標**: [簡要描述此故事交付的內容]

**獨立測試**: [如何驗證此故事可獨立運作]

### 使用者故事 1 的測試 (可選 - 僅當要求測試時) ⚠️

> **注意：請先撰寫這些測試，並確保它們在實作前會「失敗」**

- [ ] T010 [P] [US1] 在 tests/contract/test_[name].py 中為 [端點] 撰寫合約測試
- [ ] T011 [P] [US1] 在 tests/integration/test_[name].py 中為 [使用者旅程] 撰寫整合測試

### 使用者故事 1 的實作

- [ ] T012 [P] [US1] 在 src/models/[entity1].py 中建立 [實體1] 模型
- [ ] T013 [P] [US1] 在 src/models/[entity2].py 中建立 [實體2] 模型
- [ ] T014 [US1] 在 src/services/[service].py 中實作 [服務] (依賴 T012, T013)
- [ ] T015 [US1] 在 src/[location]/[file].py 中實作 [端點/功能]
- [ ] T016 [US1] 新增驗證與錯誤處理
- [ ] T017 [US1] 為使用者故事 1 的操作新增日誌記錄

**檢查點**: 此時，使用者故事 1 應功能完整且可獨立測試

---

## 階段 4：使用者故事 2 - [標題] (優先級: P2)

**目標**: [簡要描述此故事交付的內容]

**獨立測試**: [如何驗證此故事可獨立運作]

### 使用者故事 2 的測試 (可選 - 僅當要求測試時) ⚠️

- [ ] T018 [P] [US2] 在 tests/contract/test_[name].py 中為 [端點] 撰寫合約測試
- [ ] T019 [P] [US2] 在 tests/integration/test_[name].py 中為 [使用者旅程] 撰寫整合測試

### 使用者故事 2 的實作

- [ ] T020 [P] [US2] 在 src/models/[entity].py 中建立 [實體] 模型
- [ ] T021 [US2] 在 src/services/[service].py 中實作 [服務]
- [ ] T022 [US2] 在 src/[location]/[file].py 中實作 [端點/功能]
- [ ] T023 [US2] 與使用者故事 1 的組件整合 (如果需要)

**檢查點**: 此時，使用者故事 1 和 2 都應能獨立運作

---

## 階段 5：使用者故事 3 - [標題] (優先級: P3)

**目標**: [簡要描述此故事交付的內容]

**獨立測試**: [如何驗證此故事可獨立運作]

### 使用者故事 3 的測試 (可選 - 僅當要求測試時) ⚠️

- [ ] T024 [P] [US3] 在 tests/contract/test_[name].py 中為 [端點] 撰寫合約測試
- [ ] T025 [P] [US3] 在 tests/integration/test_[name].py 中為 [使用者旅程] 撰寫整合測試

### 使用者故事 3 的實作

- [ ] T026 [P] [US3] 在 src/models/[entity].py 中建立 [實體] 模型
- [ ] T027 [US3] 在 src/services/[service].py 中實作 [服務]
- [ ] T028 [US3] 在 src/[location]/[file].py 中實作 [端點/功能]

**檢查點**: 所有使用者故事現在都應能獨立運作

---

[視需要增加更多使用者故事階段，遵循相同模式]

---

## 階段 N：潤飾與跨領域關注點

**目的**: 影響多個使用者故事的改進

- [ ] TXXX [P] 更新 docs/ 中的文件
- [ ] TXXX 程式碼清理與重構
- [ ] TXXX 跨所有故事的效能優化
- [ ] TXXX [P] 在 tests/unit/ 中新增額外的單元測試 (如果要求)
- [ ] TXXX 安全性強化
- [ ] TXXX 執行 quickstart.md 驗證

---

## 依賴關係與執行順序

### 階段依賴

- **設定 (階段 1)**: 無依賴 - 可立即開始
- **基礎建設 (階段 2)**: 依賴「設定」完成 - **阻塞**所有使用者故事
- **使用者故事 (階段 3+)**: 全部依賴「基礎建設」完成
  - 之後使用者故事可以並行進行 (如果人力允許)
  - 或按優先級順序進行 (P1 → P2 → P3)
- **潤飾 (最終階段)**: 依賴所有需要的使用者故事完成

### 使用者故事依賴

- **使用者故事 1 (P1)**: 可在「基礎建設」(階段 2) 後開始 - 不依賴其他故事
- **使用者故事 2 (P2)**: 可在「基礎建設」(階段 2) 後開始 - 可能與 US1 整合，但應可獨立測試
- **使用者故事 3 (P3)**: 可在「基礎建設」(階段 2) 後開始 - 可能與 US1/US2 整合，但應可獨立測試

### 每個使用者故事內部

- 測試 (若包含) **必須**在實作前撰寫並**失敗**
- 模型優於服務
- 服務優於端點
- 核心實作優於整合
- 故事完成後再移至下一個優先級

### 並行機會

- 所有標記 [P] 的「設定」任務可並行執行
- 所有標記 [P] 的「基礎建設」任務可在階段 2 內並行執行
- 一旦「基礎建設」完成，所有使用者故事可並行開始 (如果團隊人力允許)
- 一個使用者故事的所有標記 [P] 的測試可並行執行
- 一個故事內標記 [P] 的模型可並行建立
- 不同使用者故事可由不同團隊成員並行開發

---

## 並行範例：使用者故事 1

```bash
# 一起啟動使用者故事 1 的所有測試 (如果要求測試):
任務: "在 tests/contract/test_[name].py 中為 [端點] 撰寫合約測試"
任務: "在 tests/integration/test_[name].py 中為 [使用者旅程] 撰寫整合測試"

# 一起啟動使用者故事 1 的所有模型建立:
任務: "在 src/models/[entity1].py 中建立 [實體1] 模型"
任務: "在 src/models/[entity2].py 中建立 [實體2] 模型"
```

---

## 實作策略

### MVP 優先 (僅使用者故事 1)

1. 完成階段 1：設定
2. 完成階段 2：基礎建設 (關鍵 - 阻塞所有故事)
3. 完成階段 3：使用者故事 1
4. **停止並驗證**: 獨立測試使用者故事 1
5. 若準備就緒則部署/演示

### 增量交付

1. 完成「設定」+「基礎建設」→ 基礎建設完成
2. 新增使用者故事 1 → 獨立測試 → 部署/演示 (MVP!)
3. 新增使用者故事 2 → 獨立測試 → 部署/演示
4. 新增使用者故事 3 → 獨立測試 → 部署/演示
5. 每個故事都在不破壞先前故事的情況下增加價值

### 並行團隊策略

若有多位開發者：

1. 團隊一起完成「設定」+「基礎建設」
2. 一旦「基礎建設」完成：
   - 開發者 A：使用者故事 1
   - 開發者 B：使用者故事 2
   - 開發者 C：使用者故事 3
3. 故事獨立完成並整合

---

## 備註

- [P] 任務 = 不同檔案，無依賴關係
- [故事] 標籤將任務對應到具體的使用者故事以便追溯
- 每個使用者故事應可獨立完成與測試
- 在實作前驗證測試會失敗
- 每個任務或邏輯群組後提交
- 在任何檢查點停下來獨立驗證故事
- 避免：模糊的任務、相同檔案衝突、破壞獨立性的跨故事依賴