# 資料模型：股價漲跌機率預測系統

**功能分支**: `1-stock-price-prediction`  
**日期**: 2025-11-12
**規格書**: [./spec.md](./spec.md)
**計畫**: [./plan.md](./plan.md)

## 實體定義

### 1. 歷史資料 (Historical Data)

- **描述**: 代表一組股價數據點，用於模型訓練和歷史趨勢展示。
- **屬性**:
    - `日期 (Date)`: 交易日期 (例如: YYYY-MM-DD)，唯一識別。
    - `開盤價 (Open)`: 當日開盤價格。
    - `最高價 (High)`: 當日最高價格。
    - `最低價 (Low)`: 當日最低價格。
    - `收盤價 (Close)`: 當日收盤價格。
    - `成交量 (Volume)`: 當日成交量。
- **來源**: CSV 檔案上傳或選擇。
- **關係**: 與「預測模型」間接相關 (作為訓練輸入)。
- **CSV 格式**:
    - **欄位處理**: 系統將處理 CSV 中的中文欄位名稱，並將其對應到模型所需的屬性。
    - **技術指標**: 將包含 CSV 檔案中提供的額外技術指標 (例如 SMA, MACD 等) 作為模型輸入。
    - **缺失值處理**: 針對包含 N/A 值的數據行，系統將直接刪除整行數據。

### 2. 預測模型 (Prediction Model)

- **描述**: 一個已訓練完成並儲存的機器學習模型檔案，用於進行股價漲跌預測。
- **屬性**:
    - `模型ID (Model ID)`: 唯一識別符 (例如: UUID 或基於時間戳的名稱)。
    - `檔案路徑 (File Path)`: 模型檔案在檔案系統中的儲存路徑。
    - `訓練日期 (Training Date)`: 模型完成訓練的日期。
    - `訓練資料集 (Training Dataset)`: 用於訓練模型的歷史資料集名稱或 ID。
    - `效能指標 (Performance Metrics)`: 訓練時的損失、準確度、F1-score 等評估指標。
    - `參數設定 (Parameters)`: 訓練時使用的超參數設定 (例如: 學習率、層數、優化器)。
- **儲存**: 檔案系統 (模型檔案本身)，JSON 檔案 (元資料)。
- **關係**: 產生「預測結果」。

### 3. 預測結果 (Prediction Result)

- **描述**: 給定模型對未來 N 天股價漲跌的預測輸出。
- **屬性**:
    - `預測ID (Prediction ID)`: 唯一識別符。
    - `模型ID (Model ID)`: 產生此預測結果的模型 ID。
    - `預測日期 (Prediction Date)`: 進行預測的日期。
    - `目標日期 (Target Date)`: 預測的未來日期。
    - `漲跌機率 (Up/Down Probability)`: 預測股價上漲或下跌的機率 (例如: 0.75 代表 75% 上漲機率)。
    - `漲跌幅度 (Change Magnitude)`: 預測股價變動的幅度 (例如: +2.5% 或 -1.8%)。
- **來源**: 由「預測模型」產生。
- **關係**: 由「預測模型」產生，並在 UI 中展示。

### 4. 模型元資料 (Model Metadata)

- **描述**: 儲存所有已訓練模型的元資料，便於管理和選擇。
- **屬性**:
    - `模型ID (Model ID)`: 唯一識別符。
    - `模型名稱 (Model Name)`: 使用者友好的模型名稱。
    - `檔案路徑 (File Path)`: 模型檔案的儲存路徑。
    - `訓練日期 (Training Date)`: 模型訓練完成的日期。
    - `效能指標 (Performance Metrics)`: 訓練時的關鍵效能指標。
    - `參數設定 (Parameters)`: 訓練時使用的超參數設定。
    - `資料集名稱 (Dataset Name)`: 訓練該模型所使用的資料集名稱。
- **儲存**: JSON 檔案。
- **關係**: 記錄「預測模型」的詳細資訊。
